<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Traxsource Scraper - House Music Paradise</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="images/icon.PNG">
    <link rel="icon" type="image/png" sizes="16x16" href="images/icon.PNG">
    <link rel="shortcut icon" href="images/icon.PNG">
    <link rel="apple-touch-icon" href="images/icon.PNG">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 50%, #2c2c2c 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.6;
            position: relative;
        }

        .background-orbs {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(120px);
            opacity: 0.3;
        }

        .orb-blue {
            width: 700px;
            height: 700px;
            background: radial-gradient(circle, #00aaff 0%, #0066cc 50%, transparent 70%);
            top: -200px;
            left: -300px;
            animation: moveOrbBlue 25s ease-in-out infinite;
        }

        .orb-cyan {
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, #00ffdd 0%, #008888 50%, transparent 70%);
            bottom: -150px;
            right: -250px;
            animation: moveOrbCyan 30s ease-in-out infinite;
        }

        .orb-teal {
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, #44ddaa 0%, #006644 50%, transparent 70%);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: moveOrbTeal 35s ease-in-out infinite;
        }

        @keyframes moveOrbBlue {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(200px, 100px) scale(1.1); }
            50% { transform: translate(100px, 300px) scale(0.9); }
            75% { transform: translate(-100px, 200px) scale(1.05); }
        }

        @keyframes moveOrbCyan {
            0%, 100% { transform: translate(0, 0) scale(1); }
            33% { transform: translate(-150px, -100px) scale(1.15); }
            66% { transform: translate(-300px, 50px) scale(0.85); }
        }

        @keyframes moveOrbTeal {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            20% { transform: translate(-60%, -40%) scale(1.1); }
            40% { transform: translate(-40%, -60%) scale(0.9); }
            60% { transform: translate(-55%, -45%) scale(1.05); }
            80% { transform: translate(-45%, -55%) scale(0.95); }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 120px 40px 40px 40px;
            position: relative;
            z-index: 3;
        }

        .hero-section {
            text-align: center;
            padding: 80px 0;
        }

        .hero-title {
            font-size: clamp(3rem, 10vw, 8rem);
            font-weight: 900;
            margin-bottom: 30px;
            background: linear-gradient(45deg, #9966ff, #ff66cc, #66ccff);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientFlow 6s ease-in-out infinite;
            text-transform: uppercase;
            letter-spacing: -0.02em;
        }

        .hero-subtitle {
            font-size: clamp(1.2rem, 4vw, 2rem);
            color: #cccccc;
            margin-bottom: 60px;
            font-weight: 300;
        }

        .header {
            text-align: center;
            margin-bottom: 60px;
            padding-top: 40px;
        }

        .back-button {
            position: absolute;
            top: 40px;
            left: 40px;
            background: transparent;
            color: #ffffff;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 12px 24px;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            transition: all 0.4s ease;
            z-index: 100;
        }

        .back-button:hover {
            background: #ffffff;
            color: #000000;
            border-color: #ffffff;
        }

                /* Navigation Header */
        .nav-header {
            position: fixed;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            background: linear-gradient(90deg, #181818 80%, #3ad6ff 100%);
            backdrop-filter: blur(20px);
            border-bottom: none;
            padding: 0.7rem 0;
            border-radius: 2.5rem;
            margin-top: 1.2rem;
            box-shadow: 0 4px 24px rgba(0,0,0,0.18);
            transition: box-shadow 0.2s, background 0.2s;
            max-width: 900px;
            width: 90vw;
        }

        .nav-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-logo {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .nav-logo-icon {
            width: 54px;
            height: 54px;
            background: #fff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 2.2rem;
            color: #111;
            box-shadow: 0 4px 16px rgba(0,0,0,0.13);
            border: 2px solid #222;
        }

        .nav-menu {
            display: flex;
            align-items: center;
            gap: 1.7rem;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .nav-item {
            position: relative;
        }

        .nav-link {
            color: #ffffff;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 400;
            text-transform: capitalize;
            letter-spacing: 0.02em;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-link:hover {
            color: #ff4444;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #ff4444, #ff0000);
            transition: width 0.3s ease;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .nav-dropdown {
            position: relative;
        }

        .nav-dropdown::after {
            content: '‚ñº';
            margin-left: 5px;
            font-size: 0.7rem;
            transition: transform 0.3s ease;
        }

        .nav-dropdown:hover::after {
            transform: rotate(180deg);
        }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: 1.2rem;
        }

        .nav-external-link {
            color: #ffffff;
            text-decoration: none;
            font-size: 0.9rem;
            padding: 8px 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .nav-external-link:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.4);
        }

        .nav-listen-btn {
            background: #ff1744;
            color: #fff;
            border: none;
            border-radius: 2rem;
            padding: 0.85rem 2.5rem;
            font-size: 1.15rem;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 16px rgba(255,23,68,0.13);
            display: flex;
            align-items: center;
            gap: 0.7rem;
            transition: background 0.2s, box-shadow 0.2s;
        }

        .nav-listen-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 68, 68, 0.4);
        }

        .nav-listen-btn::after {
            content: '';
            display: inline-block;
            width: 24px;
            height: 24px;
            background: url('https://cdn.prod.website-files.com/650d9b67d864656415c17b80/651e8871e761a2b4e19fa248_audio-active.svg') no-repeat center center;
            background-size: contain;
            margin-left: 8px;
            vertical-align: middle;
        }

        /* Mobile Navigation */
        .nav-mobile-toggle {
            display: none;
            background: none;
            border: none;
            color: #ffffff;
            font-size: 1.5rem;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .nav-header {
                padding: 0.4rem 0;
                margin-top: 0.7rem;
                border-radius: 1.2rem;
                max-width: 98vw;
            }
            .nav-container {
                max-width: 98vw;
                padding: 0 10px;
            }
            .nav-logo-icon {
                width: 44px;
                height: 44px;
                font-size: 1.5rem;
            }
            .nav-menu {
                display: none;
            }
            .nav-mobile-toggle {
                display: block;
            }
            .nav-actions {
                gap: 10px;
            }
            .nav-listen-btn {
                padding: 0.5rem 1.2rem;
                font-size: 1rem;
            }
            .nav-external-link {
                display: none;
            }
        }

        .platform-logo {
            width: 120px;
            height: 120px;
            margin: 0 auto 30px;
            background: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: 900;
            color: white;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .main-title {
            font-size: clamp(3rem, 8vw, 5rem);
            font-weight: 900;
            letter-spacing: -0.02em;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #00d2ff, #3a7bd5, #00ffdd);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientFlow 6s ease-in-out infinite;
            text-transform: uppercase;
        }

        .subtitle {
            font-size: 1.5rem;
            color: #888888;
            font-weight: 300;
            margin-bottom: 30px;
        }

        .description {
            font-size: 1.1rem;
            color: #cccccc;
            max-width: 600px;
            margin: 0 auto 60px;
            font-weight: 300;
            line-height: 1.8;
        }

        .controls-section {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.08);
            padding: 40px;
            margin-bottom: 40px;
            backdrop-filter: blur(10px);
        }

        .search-container {
            max-width: 600px;
            margin: 0 auto 40px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 15px 50px 15px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #ffffff;
            font-size: 1rem;
            border-radius: 0;
        }

        .search-input::placeholder {
            color: #888888;
        }

        .search-input:focus {
            outline: none;
            border-color: #00d2ff;
            background: rgba(255, 255, 255, 0.08);
        }

        .search-button {
            position: absolute;
            right: 0;
            top: 0;
            height: 100%;
            width: 50px;
            background: transparent;
            border: none;
            color: #ffffff;
            cursor: pointer;
            font-size: 1.2rem;
        }

        .genres-section {
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 30px;
            color: #ffffff;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .genres-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 40px;
        }

        .genre-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .genre-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, #00d2ff, transparent);
            transition: left 0.5s ease;
        }

        .genre-card:hover::before {
            left: 100%;
        }

        .genre-card:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(0, 210, 255, 0.5);
            transform: translateY(-2px);
        }

        .genre-card.selected {
            background: rgba(0, 210, 255, 0.2);
            border-color: #00d2ff;
        }

        .genre-name {
            font-size: 1rem;
            font-weight: 600;
            color: #ffffff;
            text-transform: capitalize;
        }

        .scrape-controls {
            text-align: center;
            margin-top: 40px;
        }

        .scrape-button {
            background: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%);
            color: white;
            border: none;
            padding: 18px 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            position: relative;
            overflow: hidden;
        }

        .scrape-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 30px rgba(0, 210, 255, 0.3);
        }

        .scrape-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .results-section {
            margin-top: 40px;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .results-count {
            color: #888888;
            font-size: 0.9rem;
        }

        .download-link {
            background: rgba(0, 210, 255, 0.2);
            color: #00d2ff;
            padding: 10px 20px;
            text-decoration: none;
            border: 1px solid #00d2ff;
            transition: all 0.3s ease;
        }

        .download-link:hover {
            background: #00d2ff;
            color: #000000;
        }

        .tracks-table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .tracks-table th,
        .tracks-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .tracks-table th {
            background: rgba(255, 255, 255, 0.05);
            font-weight: 600;
            color: #ffffff;
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 0.1em;
        }

        .tracks-table td {
            color: #cccccc;
        }

        .tracks-table tr:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .position {
            color: #00d2ff;
            font-weight: 700;
            width: 60px;
        }

        .track-title {
            color: #ffffff;
            font-weight: 600;
        }

        .loading {
            text-align: center;
            padding: 60px;
            color: #888888;
        }

        .loading-spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 3px solid rgba(0, 210, 255, 0.3);
            border-radius: 50%;
            border-top-color: #00d2ff;
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes gradientFlow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .error-message {
            background: rgba(255, 0, 0, 0.1);
            border: 1px solid rgba(255, 0, 0, 0.3);
            color: #ff6b6b;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .success-message {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid rgba(0, 255, 0, 0.3);
            color: #4ecdc4;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            .genres-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 10px;
            }

            .back-button {
                position: relative;
                top: 0;
                left: 0;
                margin-bottom: 20px;
                display: inline-block;
            }

            .tracks-table {
                font-size: 0.8rem;
            }

            .tracks-table th,
            .tracks-table td {
                padding: 10px 5px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Header -->
    <nav class="nav-header">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="./images/icon.PNG" alt="Logo" class="nav-logo-icon" style="width:54px;height:54px;border-radius:50%;object-fit:cover;border:2px solid #222;box-shadow:0 4px 16px rgba(0,0,0,0.13);">
            </div>
            
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">Inicio</a>
                </li>
                <li class="nav-item">
                    <a href="beatport.html" class="nav-link">Beatport</a>
                </li>
                <li class="nav-item">
                    <a href="traxsource.html" class="nav-link">Traxsource</a>
                </li>
                <li class="nav-item">
                    <a href="1001tracklists.html" class="nav-link">1001Tracklists</a>
                </li>
                <li class="nav-item">
                    <a href="visualiceList.html" class="nav-link">Visualice</a>
                </li>
                <li class="nav-item">
                    <a href="radio.html" class="nav-link">Radio</a>
                </li>
            </ul>
            
            <div class="nav-actions">
                <a href="radio.html" class="nav-listen-btn"><span class="visually-hidden">Listen</span></a>
            </div>
            
            <button class="nav-mobile-toggle">‚ò∞</button>
        </div>
    </nav>

    <div class="background-orbs">
        <div class="orb orb-blue"></div>
        <div class="orb orb-cyan"></div>
        <div class="orb orb-teal"></div>
    </div>

    <div class="container">
        <a href="index.html" class="back-button">‚Üê Volver</a>
        
        <header class="header">
           <section class="hero-section">
                <h1 class="hero-title">TRAXSOURCE</h1>
                <p class="hero-subtitle">Descubre la mejor musica electronica</p>
            </section>
            <p class="description">
                Extrae los mejores tracks de House, Deep House, Soulful y todos los subg√©neros 
                que definen la cultura underground de la m√∫sica electr√≥nica.
            </p>
        </header>

        <section class="controls-section">
            <div class="search-container">
                <input type="text" id="searchInput" class="search-input" placeholder="Buscar g√©neros...">
                <button class="search-button">üîç</button>
            </div>

            <div class="genres-section">
                <h2 class="section-title">Selecciona un G√©nero</h2>
                <div id="genresGrid" class="genres-grid">
                    <!-- Los g√©neros se cargar√°n aqu√≠ din√°micamente -->
                </div>
            </div>

            <div class="scrape-controls">
                <button id="scrapeButton" class="scrape-button" disabled>
                    Extraer Top 100 Tracks
                </button>
            </div>
        </section>

        <section id="resultsSection" class="results-section" style="display: none;">
            <div class="results-header">
                <h2 class="section-title">Resultados</h2>
                <div>
                    <span id="resultsCount" class="results-count"></span>
                    <a id="downloadLink" class="download-link" style="display: none;">Descargar CSV</a>
                </div>
            </div>
            <div id="resultsContent"></div>
        </section>
    </div>

    <div id="radioPlayerFooter" style="display:none;"></div>
    <audio id="footerAudio" style="display:none;" preload="none"></audio>
    <script>
    // Footer player persistente
    const footer = document.getElementById('radioPlayerFooter');
    const audio = document.getElementById('footerAudio');
    let currentRadioName = '';
    function showFooterPlayer(url, name) {
        currentRadioName = name;
        audio.src = url;
        audio.loop = true;
        audio.autoplay = true;
        audio.style.display = 'none';
        audio.play();
        localStorage.setItem('radio_stream_url', url);
        localStorage.setItem('radio_stream_name', name);
        renderFooterPlayer();
    }
    function renderFooterPlayer() {
        footer.style.display = 'flex';
        footer.style.position = 'fixed';
        footer.style.left = '0';
        footer.style.right = '0';
        footer.style.bottom = '0';
        footer.style.height = '90px';
        footer.style.background = 'linear-gradient(90deg, #111 70%, #00353d 100%)';
        footer.style.color = '#fff';
        footer.style.zIndex = '9999';
        footer.style.alignItems = 'center';
        footer.style.justifyContent = 'space-between';
        footer.style.padding = '0 40px';
        footer.style.boxshadow = '0 -2px 16px rgba(0,0,0,0.25)';
        footer.innerHTML = `
            <div style="display:flex;align-items:center;gap:16px;">
                <svg width="48" height="48" viewBox="0 0 256 256" fill="none" xmlns="http://www.w3.org/2000/svg" style="border-radius:12px;object-fit:cover;">
                    <path d="M199.641 113.351C198.353 117.933 193.96 120.61 189.337 119.393C183.956 117.976 179.319 118.749 175.67 123.245C173.924 125.393 173.18 127.87 173.194 130.633C173.208 147.715 173.237 164.811 173.151 181.893C173.151 183.726 172.808 185.745 172.021 187.363C170.174 191.1 165.953 192.803 162.06 191.773C158.396 190.799 155.649 187.191 155.62 183.11C155.591 178.557 155.591 173.989 155.591 169.436C155.591 164.883 155.591 160.315 155.591 155.762C155.591 147.343 155.563 138.924 155.591 130.504C155.663 114.081 168.829 100.908 185.044 101.166C188.035 101.209 191.083 101.853 193.974 102.655C198.597 103.944 200.944 108.64 199.613 113.337L199.641 113.351ZM132.922 189.009C130.418 191.787 127.312 192.689 123.806 191.558C120.171 190.384 118.11 187.735 117.624 183.912C117.552 183.353 117.567 182.781 117.567 182.208C117.567 145.997 117.567 109.786 117.567 73.5746C117.567 67.8902 121.273 63.8524 126.454 63.8524C130.833 63.8524 134.583 67.2315 135.055 71.6273C135.141 72.4434 135.141 73.2739 135.141 74.09C135.141 92.0739 135.141 110.043 135.141 128.027C135.141 146.068 135.141 164.109 135.141 182.165C135.141 184.714 134.668 187.062 132.908 189.023L132.922 189.009ZM96.6865 183.21C96.6865 187.62 93.6239 191.372 89.7027 191.901C85.0515 192.531 81.0587 190.069 79.8566 185.773C79.5846 184.814 79.556 183.769 79.556 182.766C79.5417 170.538 79.556 158.325 79.556 146.097C79.556 133.869 79.556 121.899 79.556 109.814C79.556 104.559 83.1768 100.751 88.1714 100.751C93.1373 100.751 96.7008 104.459 96.7008 109.685C96.7008 114.912 96.7008 183.21 96.7008 183.21H96.6865ZM128.071 0.00688847C60.2645 -0.709029 0.0859603 54.4596 9.31497e-05 127.827C-0.085774 200.378 59.2055 256.849 129.531 255.99C198.954 255.131 254.51 199.118 255.97 130.819C257.53 57.4521 197.809 -0.608801 128.071 0.00688847Z" fill="currentColor"></path>
                </svg>
                <div>
                    <div style="font-size:1.1rem;font-weight:600;">${currentRadioName}</div>
                    <div style="font-size:0.9rem;color:#ccc;">En reproducci√≥n</div>
                </div>
            </div>
            <div style="flex:1;text-align:center;">
                <button id="footerPlayPause" style="background:#222;border:none;border-radius:50%;width:48px;height:48px;color:#fff;font-size:1.5rem;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,0.18);">
                    <img id="footerPlayPauseIcon" src="https://cdn.prod.website-files.com/650d9b67d864656415c17b80/65699589050a0d478f24591d_play.png" alt="Play/Pause" style="width:18px;height:18px;object-fit:contain;filter:brightness(1.2);">
                </button>
            </div>
            <div style="width:120px;text-align:right;">
                <button id="footerClose" style="background:none;border:none;color:#fff;font-size:1.5rem;cursor:pointer;">‚úñ</button>
            </div>
        `;
    const playIcon = 'https://cdn.prod.website-files.com/650d9b67d864656415c17b80/65699589050a0d478f24591d_play.png';
    const pauseIcon = 'https://cdn.prod.website-files.com/650d9b67d864656415c17b80/65699589050a0d478f245914_pause-button.png';
        const playPauseImg = document.getElementById('footerPlayPauseIcon');
        function updatePlayPauseIcon() {
            playPauseImg.src = audio.paused ? playIcon : pauseIcon;
        }
        document.getElementById('footerPlayPause').onclick = function() {
            if (audio.paused) {
                audio.play();
            } else {
                audio.pause();
            }
            updatePlayPauseIcon();
        };
        audio.addEventListener('play', updatePlayPauseIcon);
        audio.addEventListener('pause', updatePlayPauseIcon);
        updatePlayPauseIcon();
        document.getElementById('footerClose').onclick = function() {
            audio.pause();
            footer.style.display = 'none';
            localStorage.removeItem('radio_stream_url');
            localStorage.removeItem('radio_stream_name');
        };
    }
    // Persistencia al navegar
    window.addEventListener('DOMContentLoaded', () => {
        const url = localStorage.getItem('radio_stream_url');
        const name = localStorage.getItem('radio_stream_name');
        if (url && name) {
            showFooterPlayer(url, name);
        }
    });
    </script>

    <script>
        let selectedGenre = null;
        let allGenres = [];
        let isLoading = false;

        // Cargar g√©neros al iniciar
        async function loadGenres() {
            try {
                const response = await fetch('/api/traxsource/genres');
                allGenres = await response.json();
                renderGenres(allGenres);
            } catch (error) {
                console.error('Error cargando g√©neros:', error);
                document.getElementById('genresGrid').innerHTML = `
                    <div class="error-message">
                        Error cargando g√©neros. Por favor recarga la p√°gina.
                    </div>
                `;
            }
        }

        // Renderizar g√©neros
        function renderGenres(genres) {
            const grid = document.getElementById('genresGrid');
            grid.innerHTML = genres.map(genre => `
                <div class="genre-card" data-genre="${genre.id}">
                    <div class="genre-name">${genre.name}</div>
                </div>
            `).join('');

            // Agregar event listeners
            document.querySelectorAll('.genre-card').forEach(card => {
                card.addEventListener('click', () => selectGenre(card.dataset.genre));
            });
        }

        // Seleccionar g√©nero
        function selectGenre(genreId) {
            selectedGenre = genreId;
            
            // Actualizar UI
            document.querySelectorAll('.genre-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.querySelector(`[data-genre="${genreId}"]`).classList.add('selected');
            
            // Habilitar bot√≥n de scraping
            document.getElementById('scrapeButton').disabled = false;
        }

        // Funci√≥n de b√∫squeda
        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            const searchButton = document.querySelector('.search-button');

            function performSearch() {
                const query = searchInput.value.toLowerCase().trim();
                if (query === '') {
                    renderGenres(allGenres);
                } else {
                    const filtered = allGenres.filter(genre => 
                        genre.name.toLowerCase().includes(query) ||
                        genre.id.toLowerCase().includes(query)
                    );
                    renderGenres(filtered);
                }
            }

            searchInput.addEventListener('input', performSearch);
            searchButton.addEventListener('click', performSearch);
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') performSearch();
            });
        }

        // Hacer scraping
        async function performScraping() {
            if (!selectedGenre || isLoading) return;

            isLoading = true;
            const button = document.getElementById('scrapeButton');
            const resultsSection = document.getElementById('resultsSection');
            const resultsContent = document.getElementById('resultsContent');

            // Actualizar UI
            button.disabled = true;
            button.textContent = 'Extrayendo...';
            resultsSection.style.display = 'block';
            resultsContent.innerHTML = `
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <p>Extrayendo tracks de Traxsource...</p>
                    <p>Esto puede tomar varios minutos...</p>
                </div>
            `;

            try {
                const response = await fetch('/api/traxsource/scrape', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ genre: selectedGenre })
                });

                const data = await response.json();

                if (data.success) {
                    displayResults(data);
                } else {
                    throw new Error(data.error || 'Error en el scraping');
                }

            } catch (error) {
                console.error('Error durante el scraping:', error);
                resultsContent.innerHTML = `
                    <div class="error-message">
                        Error durante el scraping: ${error.message}
                    </div>
                `;
            } finally {
                isLoading = false;
                button.disabled = false;
                button.textContent = 'Extraer Top 100 Tracks';
            }
        }

        // Mostrar resultados
        function displayResults(data) {
            const resultsCount = document.getElementById('resultsCount');
            const downloadLink = document.getElementById('downloadLink');
            const resultsContent = document.getElementById('resultsContent');

            resultsCount.textContent = `${data.tracksCount} tracks encontrados`;
            
            if (data.filename) {
                downloadLink.style.display = 'inline-block';
                downloadLink.href = `/api/traxsource/download/${selectedGenre}/${data.filename}`;
                downloadLink.textContent = `Descargar ${data.filename}`;
            }

            // Mostrar mensaje de √©xito
            resultsContent.innerHTML = `
                <div class="success-message">
                    ‚úÖ Scraping completado exitosamente! Se encontraron ${data.tracksCount} tracks de ${data.genre}.
                </div>
            `;

            // Mostrar tabla de tracks si hay datos
            if (data.tracks && data.tracks.length > 0) {
                const tracksTable = `
                    <table class="tracks-table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>T√≠tulo</th>
                                <th>Artista</th>
                                <th>Label</th>
                                <th>Duraci√≥n</th>
                                <th>BPM</th>
                                <th>Key</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${data.tracks.map(track => `
                                <tr>
                                    <td class="position">${track.position}</td>
                                    <td class="track-title">${track.title}</td>
                                    <td>${track.artist}</td>
                                    <td>${track.label}</td>
                                    <td>${track.duration}</td>
                                    <td>${track.bpm}</td>
                                    <td>${track.key}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
                resultsContent.innerHTML += tracksTable;
            }
        }

        // Event listeners
        document.getElementById('scrapeButton').addEventListener('click', performScraping);

        // Inicializar aplicaci√≥n
        document.addEventListener('DOMContentLoaded', () => {
            loadGenres();
            setupSearch();
        });
    </script>
</body>
</html>
        